<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>OMC - Certificat de Décès</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <div id="input-panel">
        <a href="index.html" class="back-link">← RETOUR AU PORTAIL</a>
        <h2>OMC - ACTE DE DÉCÈS</h2>

        <div class="input-group">
            <label>Défunt (Nom Prénom)</label>
            <input type="text" oninput="up('d-defunt', this.value)" placeholder="Garret FREEMAN">
        </div>
        <div class="input-group">
            <label>Date de naissance</label>
            <input type="date" oninput="upDate('d-naissance', this.value)">
        </div>
        <div class="input-group">
            <label>Date du décès</label>
            <input type="date" oninput="upDate('d-date-deces', this.value)">
        </div>
        <div class="input-group">
            <label>Heure du décès</label>
            <input type="time" oninput="up('d-heure-deces', this.value)">
        </div>
        <div class="input-group">
            <label>Lieu du décès</label>
            <input type="text" oninput="up('d-lieu', this.value)" placeholder="OMC - Service Urgences">
        </div>
        <div class="input-group">
            <label>Cause immédiate - Type</label>
            <select onchange="up('d-cause', this.value)">
                <option value="-">-- Sélectionner --</option>
                <option value="Arrêt Cardio-respiratoire">Arrêt Cardio-respiratoire</option>
                <option value="Choc Hypovolémique">Choc Hypovolémique</option>
                <option value="Traumatisme Crânien">Traumatisme Crânien</option>
                <option value="Overdose">Overdose</option>
            </select>
        </div>
        <div class="input-group">
            <label>Médecin certificateur</label>
            <input type="text" oninput="up('d-medecin', this.value)" placeholder="Dr. Bill HANSON">
        </div>

        <button onclick="window.print()" id="print-btn">IMPRIMER LE CERTIFICAT</button>
        <button onclick="envoyerDiscordDeces()" id="discord-btn">ENVOYER DANS ACTE DE DÉCÈS</button>
    </div>

    <div id="preview-area">
        <div id="document" class="certificate">
            <div class="header-cert">
                <img src="assets/logo_omc.png" alt="Logo OMC" style="height: 40px;">
                <div class="cert-title-block">
                    <span class="cert-tag">OCEAN MEDICAL CENTER</span>
                    <h1 class="cert-main-title">Certificat de décès</h1>
                </div>
            </div>

            <div class="cert-grid">
                <div class="cert-box">
                    <label>Défunt</label>
                    <div id="d-defunt" class="cert-val">-</div>
                </div>
                <div class="cert-box">
                    <label>Naissance</label>
                    <div id="d-naissance" class="cert-val">-</div>
                </div>
                <div class="cert-box">
                    <label>Date / heure du décès</label>
                    <div class="cert-val"><span id="d-date-deces">-</span> <span id="d-heure-deces"></span></div>
                </div>
                <div class="cert-box">
                    <label>Lieu</label>
                    <div id="d-lieu" class="cert-val">-</div>
                </div>
                <div class="cert-box">
                    <label>Référence dossier</label>
                    <div id="d-ref" class="cert-val">18011456</div>
                </div>
                <div class="cert-box">
                    <label>Cause immédiate</label>
                    <div id="d-cause" class="cert-val">-</div>
                </div>
            </div>

            <div class="cert-footer">
                <div class="cert-signature">
                    <label>Établi par</label>
                    <div id="d-medecin" class="cert-val">-</div>
                </div>
                <div class="cert-stamps">
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=80x80&data=OMC-DECES-18011456" alt="QR Code" class="qr-code">
                    <div class="round-stamp">
                        <span>OCEAN MEDICAL</span>
                        <span class="stamp-ref">18011456</span>
                        <span>CENTER</span>
                    </div>
                </div>
            </div>

            <p class="legal-text">
                Ce certificat de décès est établi dans le cadre de la pratique médicale, sur la base des constatations cliniques et des informations disponibles au moment de la certification. Il atteste uniquement du décès de la personne identifiée ci-dessus.<br><br>
                Toute reproduction, falsification ou usage détourné de ce document est strictement interdite. Les données nominatives y figurant sont protégées par la réglementation en vigueur et ne peuvent être utilisées qu'aux seules fins administratives, judiciaires ou médicales prévues.
            </p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
