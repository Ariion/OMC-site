<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>OMC - Acte de D√©c√®s</title>
    <link rel="stylesheet" href="global.css">
    <link rel="stylesheet" href="deces.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <div id="input-panel">
        <a href="index.html" class="back-link">‚Üê RETOUR AU PORTAIL</a>
        <h2>CERTIFICAT DE D√âC√àS</h2>

        <div class="input-group">
            <label>Nom & Pr√©nom du D√©funt</label>
            <input type="text" oninput="up('d-nom', this.value)" placeholder="ex: John Doe">
        </div>

        <div class="input-group">
            <label>Date de Naissance</label>
            <input type="date" oninput="upDate('d-ddn', this.value)">
        </div>

        <div class="input-group">
            <label>Date & Heure du D√©c√®s</label>
            <div style="display: flex; gap: 5px;">
                <input type="date" oninput="upDate('d-date', this.value)" style="flex: 2;">
                <input type="time" oninput="up('d-heure', this.value)" style="flex: 1;">
            </div>
        </div>

        <div class="input-group">
            <label>Lieu du D√©c√®s</label>
            <input type="text" oninput="up('d-lieu', this.value)" placeholder="ex: Los Santos">
        </div>

        <div class="input-group">
            <label>Cause du D√©c√®s (Type)</label>
            <select id="cause-type" onchange="updateCausesSub(this.value)">
                <option value="">-- S√©lectionner --</option>
                <option value="Neurologique">Neurologique</option>
                <option value="H√©morragique">H√©morragique</option>
                <option value="Infectieuse / M√©tabolique">Infectieuse / M√©tabolique</option>
                <option value="Cardio-respiratoire">Cardio-respiratoire</option>
                <option value="Traumatique">Traumatique</option>
                <option value="Toxique">Toxique</option>
            </select>
        </div>

        <div class="input-group">
            <label>Pr√©cision de la cause</label>
            <select id="cause-precision" onchange="updateCauseFinale(this.value)">
                <option value="">-- Attente type --</option>
            </select>
        </div>

        <div class="input-group">
            <label>Docteur Signataire</label>
            <input type="text" oninput="up('d-sig', this.value)" placeholder="Nom du m√©decin">
        </div>

        <button onclick="genererImage()" class="btn-image">üñºÔ∏è G√âN√âRER L'IMAGE (LIEN)</button>
<button id="discord-btn" onclick="envoyerDiscord()" class="btn-discord">ENVOYER SUR DISCORD</button>

<div id="image-popup" class="popup-overlay" style="display:none;">
    <div class="popup-content">
        <h3>Image G√©n√©r√©e</h3>
        <p>L'image a √©t√© h√©berg√©e avec succ√®s :</p>
        <input type="text" id="direct-link" readonly onclick="this.select()">
        <div class="popup-buttons">
            <button onclick="copyLink()" class="btn-copy">Copier le lien</button>
            <button onclick="closePopup()" class="btn-close">Fermer</button>
        </div>
        <div id="image-preview-container">
            <img id="preview-img-result" src="" style="max-width: 100%; margin-top: 15px; border-radius: 5px;">
        </div>
    </div>
</div>
    </div>

    <div id="preview-area">
        <div id="document">
            <div class="header-cert">
                <img src="assets/logo_omc.png" alt="Logo" style="height: 60px;">
                <div>
                    <div class="cert-tag">OCEAN MEDICAL CENTER</div>
                    <h1 class="cert-main-title">Certificat de d√©c√®s</h1>
                </div>
            </div>

            <div class="cert-grid">
                <div class="cert-box">
                    <label>D√©funt</label>
                    <div id="d-nom" class="cert-val">...</div>
                </div>
                <div class="cert-box">
                    <label>Naissance</label>
                    <div id="d-ddn" class="cert-val">...</div>
                </div>
                <div class="cert-box">
                    <label>Date / Heure du d√©c√®s</label>
                    <div class="cert-val"><span id="d-date">...</span> √† <span id="d-heure">--:--</span></div>
                </div>
                <div class="cert-box">
                    <label>Lieu</label>
                    <div id="d-lieu" class="cert-val">...</div>
                </div>
                <div class="cert-box" style="grid-column: span 2;">
                    <label>R√©f√©rence dossier</label>
                    <div id="d-ref" class="cert-val" style="color: var(--omc-cyan);">Chargement...</div>
                </div>
                <div class="cert-box" style="grid-column: span 2;">
                    <label>Cause imm√©diate</label>
                    <div id="d-cause" class="cert-val">...</div>
                </div>
            </div>

            <div class="cert-footer">
                <div class="cert-signature">
                    √âtabli par :<br><br>
                    <span id="d-sig">DOCTEUR</span>
                </div>
                <div class="round-stamp">
                    <img id="qr-ref" class="qr-code" src="" alt="QR">
                    OMC MEDICAL CENTER
                </div>
            </div>

            <p class="legal-text">
                Ce certificat de d√©c√®s est √©tabli dans le cadre de la pratique m√©dicale, sur la base des constatations cliniques. 
                Toute reproduction ou usage d√©tourn√© est strictement interdite sous peine de poursuites.
            </p>
        </div>
    </div>

    <script src="global.js"></script>
    <script src="deces.js"></script>
</body>
</html>


